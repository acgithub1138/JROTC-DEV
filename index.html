
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <meta http-equiv="Permissions-Policy" content="vr=(), ambient-light-sensor=(), battery=()" />
    <title>JROTC CCC - Command and Control Center</title>
    <meta name="description" content="JROTC Command and Control Center - Manage your corps with precision" />
    <meta name="author" content="Lovable" />

    <meta property="og:title" content="JROTC CCC - Command and Control Center" />
    <meta property="og:description" content="JROTC Command and Control Center - Manage your corps with precision" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    
    <!-- Resource hints to reduce network dependency chain -->
    <link rel="modulepreload" href="/src/main.tsx" />
    <link rel="dns-prefetch" href="https://kdksbhapzsknieizubvu.supabase.co" />
    <link rel="preconnect" href="https://kdksbhapzsknieizubvu.supabase.co" crossorigin />
    
    <!-- Critical CSS - Inline for faster initial paint -->
    <style>
      :root {
        --background: 0 0% 100%;
        --foreground: 222.2 84% 4.9%;
        --primary: 210 100% 20%;
        --primary-foreground: 210 40% 98%;
        --primary-glow: 210 100% 40%;
        --secondary: 210 40% 96.1%;
        --secondary-foreground: 222.2 47.4% 11.2%;
        --muted: 210 40% 96.1%;
        --muted-foreground: 215.4 16.3% 46.9%;
        --border: 214.3 31.8% 91.4%;
        --radius: 0.5rem;
      }
      .dark {
        --background: 222.2 84% 4.9%;
        --foreground: 210 40% 98%;
        --primary: 210 40% 98%;
        --primary-foreground: 222.2 47.4% 11.2%;
        --muted: 217.2 32.6% 17.5%;
        --muted-foreground: 215 20.2% 65.1%;
      }
      * {
        border-color: hsl(var(--border));
      }
      body {
        background-color: hsl(var(--background));
        color: hsl(var(--foreground));
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      }
      #root {
        min-height: 100vh;
      }
      /* Critical hero styles for LCP optimization */
      h1 {
        font-weight: 700;
        line-height: 1.1;
        letter-spacing: -0.025em;
      }
      /* Optimize font loading */
      @font-face {
        font-display: swap;
      }
    </style>
    
    <!-- Intercept and defer Vite's CSS to prevent render blocking -->
    <script>
      // Prevent render-blocking CSS by deferring stylesheet loading
      (function() {
        'use strict';
        var originalCreateElement = document.createElement;
        document.createElement = function(tagName) {
          var element = originalCreateElement.call(this, tagName);
          if (tagName.toLowerCase() === 'link') {
            var originalSetAttribute = element.setAttribute;
            element.setAttribute = function(name, value) {
              // Defer CSS loading to prevent render blocking
              if (name === 'rel' && value === 'stylesheet') {
                element.media = 'print';
                element.onload = function() {
                  this.media = 'all';
                };
              }
              return originalSetAttribute.call(this, name, value);
            };
          }
          return element;
        };
      })();
    </script>
    
    <!-- Enhanced Sentry blocking - MUST run before any other scripts -->
    <script>
      (function() {
        'use strict';
        
        // Aggressive environment blocking
        window.SENTRY_DISABLED = true;
        window.__SENTRY_DISABLED__ = true;
        window.process = window.process || {};
        window.process.env = window.process.env || {};
        window.process.env.NODE_ENV = 'development';
        window.process.env.SENTRY_DSN = '';
        
        // Block all Sentry-related globals before bundle loads
        const noOp = function() { return Promise.resolve(); };
        const noOpObj = new Proxy({}, {
          get: () => noOp,
          set: () => true,
          has: () => false
        });
        
        // Override all possible Sentry entry points
        Object.defineProperty(window, 'Sentry', {
          get: () => noOpObj,
          set: () => true,
          configurable: false,
          enumerable: false
        });
        
        Object.defineProperty(window, '__SENTRY__', {
          get: () => ({ logger: { disable: noOp }, disabled: true }),
          set: () => true,
          configurable: false
        });
        
        Object.defineProperty(window, '__SENTRY_HUB__', {
          get: () => ({ getClient: () => null, disabled: true }),
          set: () => true,
          configurable: false
        });
        
        // Aggressive network blocking - multiple layers
        const sentryDomains = ['sentry.io', 'ingest.sentry.io', 'o4506071217143808.ingest.sentry.io'];
        
        // Override fetch at the prototype level
        if (window.fetch) {
          const originalFetch = window.fetch;
          window.fetch = function(input, init) {
            const url = typeof input === 'string' ? input : (input && input.url);
            if (url && sentryDomains.some(domain => url.includes(domain))) {
              return Promise.resolve(new Response('{"disabled":true}', { 
                status: 200, 
                statusText: 'OK',
                headers: { 'content-type': 'application/json' }
              }));
            }
            return originalFetch.call(this, input, init);
          };
        }
        
        // Override XMLHttpRequest more aggressively
        if (window.XMLHttpRequest) {
          const OriginalXHR = window.XMLHttpRequest;
          window.XMLHttpRequest = function() {
            const xhr = new OriginalXHR();
            const originalOpen = xhr.open;
            const originalSend = xhr.send;
            
            xhr.open = function(method, url, async, user, password) {
              if (typeof url === 'string' && sentryDomains.some(domain => url.includes(domain))) {
                // Completely disable the request
                this.send = noOp;
                this.setRequestHeader = noOp;
                this.abort = noOp;
                setTimeout(() => {
                  if (this.onload) this.onload({ target: { status: 200, response: '{"disabled":true}' } });
                }, 0);
                return;
              }
              return originalOpen.call(this, method, url, async, user, password);
            };
            
            return xhr;
          };
        }
        
        // Block beacon API
        if (navigator.sendBeacon) {
          const originalSendBeacon = navigator.sendBeacon;
          navigator.sendBeacon = function(url, data) {
            if (typeof url === 'string' && sentryDomains.some(domain => url.includes(domain))) {
              return true; // Pretend it succeeded
            }
            return originalSendBeacon.call(this, url, data);
          };
        }
        
        // Register Service Worker to block at network level
        if ('serviceWorker' in navigator) {
          const swCode = `
            self.addEventListener('fetch', function(event) {
              const url = event.request.url;
              if (url.includes('sentry.io')) {
                event.respondWith(new Response('{"disabled":true}', { 
                  status: 200, 
                  headers: { 'content-type': 'application/json' }
                }));
              }
            });
          `;
          
          const swBlob = new Blob([swCode], { type: 'application/javascript' });
          const swUrl = URL.createObjectURL(swBlob);
          
          navigator.serviceWorker.register(swUrl).catch(() => {
            // Silently fail if service worker registration fails
          });
        }
        
        // Enhanced console error suppression
        const originalConsoleError = console.error;
        console.error = function() {
          const message = String(arguments[0] || '');
          const suppressedErrors = [
            'ResizeObserver', 'Non-Error promise rejection', 'Script error',
            'sentry', 'Sentry', 'SENTRY', '429', 'Too Many Requests',
            'network error', 'fetch failed'
          ];
          
          if (suppressedErrors.some(err => message.toLowerCase().includes(err.toLowerCase()))) {
            return; // Suppress these errors completely
          }
          return originalConsoleError.apply(this, arguments);
        };
        
        // Block dynamic script injection for Sentry
        const originalCreateElement = document.createElement;
        document.createElement = function(tagName) {
          const element = originalCreateElement.call(this, tagName);
          if (tagName.toLowerCase() === 'script') {
            const originalSetAttribute = element.setAttribute;
            element.setAttribute = function(name, value) {
              if (name === 'src' && typeof value === 'string' && sentryDomains.some(domain => value.includes(domain))) {
                return; // Block script loading
              }
              return originalSetAttribute.call(this, name, value);
            };
          }
          return element;
        };
        
      })();
    </script>
  </head>

  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
